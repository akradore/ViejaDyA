<?xml version="1.0" encoding="utf-8"?>
<!--
Copyright (C) 2015 DevIntelle Consulting Service Pvt.Ltd (<http://www.devintellecs.com>).

For Module Support : devintelle@gmail.com  or Skype : devintelle 
 -->
<odoo>
		<template id="dev_stock_inventory_template">
			<t t-call="web.html_container">
			<t t-call="dev_stock_inventory_report.external_layout_stock_inventory">
            <t t-foreach="docs.warehouse_ids" t-as="warehouse_id">
                    <div class="page" style="font-size:12px;color:#000">
                        <style>
                            .header_table{
                                width:100%;
                            }
                            .header_table th{
                                padding:5px;
                                text-align:center;
                                border:1px solid black;
                                background:#c8cace;
                            }
                            .header_table td{
                                padding:5px;
                                text-align:center;
                                border:1px solid black;
                            }
                            .my_table{
                                width:100%;
                            }
                            .my_table th{
                                padding:5px;
                            }
                            .my_table .bottom_my_table th{
                                border-bottom:1px solid #000;
                            }
                            .my_table td{
                                padding:5px;
                                border-bottom:1px solid #efefef;
                            }
                        </style>
                        <div class="row">
                            <div class="col-xs-12 text-center">
                            <h3>STOCK INVENTORY</h3><br/>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12">
                                <table class="header_table">
                                    <thead>
                                        <tr>
                                            <th style="width:20%"> Company </th>
                                            <th style="width:20%"> Warehouse </th>
                                            <th style="width:20%"> Date </th>
                                            <th style="width:20%"> Generated By </th>
                                            <th style="width:20%"> Generated Date </th>
                                        </tr>
                                    </thead>
                                    <tbody class="sale_tbody">
                                        <tr>
                                            <td> <span t-esc="docs.company_id.name"/></td>
                                            <td> <span t-esc="warehouse_id.name"/></td>
                                            <td>
                                                <span t-esc="time.strftime('%d/%m/%Y',time.strptime(docs.start_date,'%Y-%m-%d'))"/>
                                                To
                                                <span t-esc="time.strftime('%d/%m/%Y',time.strptime(docs.end_date,'%Y-%m-%d'))"/>
                                            </td>
                                            <td> <span t-esc="user.name"/> </td>
                                            <td> <span t-esc="get_formate_date()"/> </td>
                                        </tr>
                                    </tbody>
                                </table>

                            </div>
                        </div>

                        <div class="row mt32 mb32"/>
                        <div class="row">
                            <div class="col-xs-12">
                                <table class="my_table">
                                    <thead>
                                        <tr>
                                            <th width="12%" style="background:#d6d6d6">Product</th>
                                            <th width="8%" class="text-right" style="background:#d6d6d6">Beginning </th>
                                            <th width="8%" class="text-right" style="background:#d6d6d6"> Purchases </th>
                                            <th width="7%" class="text-right" style="background:#d6d6d6">Sales</th>
                                            <th width="8%" class="text-center" style="background:#d6d6d6;" colspan="2">
                                                      <span style="padding-left:50px">INTERNAL</span>
                                            </th>
                                            <th width="8%" class="text-center" style="background:#d6d6d6;" colspan="2">
                                                <span style="padding-left:50px">PRODUCTION</span>
                                            </th>
                                            <th width="9%" class="text-right" style="background:#d6d6d6">Adjustments</th>
                                            <th width="8%" class="text-right" style="background:#d6d6d6">Ending</th>
                                            <th width="8%" class="text-right" style="background:#d6d6d6">Cost</th>
                                            <th width="8%" class="text-right" style="background:#d6d6d6">Total Cost</th>
                                        </tr>
                                        <tr class="bottom_my_table">
                                            <th width="12%" style="background:#d6d6d6"> </th>
                                            <th width="8%" class="text-right" style="background:#d6d6d6">  </th>
                                            <th width="8%" class="text-right" style="background:#d6d6d6">  </th>
                                            <th width="7%" class="text-right" style="background:#d6d6d6">  </th>
                                            <th width="8%" class="text-right" style="background:#d6d6d6"> IN</th>
                                            <th width="8%" class="text-right" style="background:#d6d6d6"> OUT</th>
                                            <th width="8%" class="text-right" style="background:#d6d6d6"> IN</th>
                                            <th width="8%" class="text-right" style="background:#d6d6d6"> OUT</th>
                                            <th width="9%" class="text-right" style="background:#d6d6d6">  </th>
                                            <th width="8%" class="text-right" style="background:#d6d6d6">  </th>
                                            <th width="8%" class="text-right" style="background:#d6d6d6">  </th>
                                            <th width="8%" class="text-right" style="background:#d6d6d6">  </th>
                                        </tr>
                                    </thead>
                                    <tbody class="sale_tbody">
                                        <t t-set="lines" t-value="docs.get_lines(warehouse_id)" />
                                        <t t-if="not docs.is_group_by_category">
                                            <t t-set="b_qty" t-value="0" />
                                            <t t-set="r_qty" t-value="0" />
                                            <t t-set="s_qty" t-value="0" />
                                            <t t-set="i_qty" t-value="0" />
                                            <t t-set="o_qty" t-value="0" />
                                            <t t-set="a_qty" t-value="0" />
                                            <t t-set="p_qty" t-value="0" />
                                            <t t-set="po_qty" t-value="0" />
                                            <t t-set="e_qty" t-value="0" />
                                            <t t-set="cost" t-value="0"/>
                                            <t t-set="total_cost" t-value="0"/>
                                            <t t-foreach="lines" t-as="line">
                                                <t t-set="b_qty" t-value="b_qty + line.get('beginning_qty')" />
                                                <t t-set="r_qty" t-value="r_qty + line.get('received_qty')" />
                                                <t t-set="s_qty" t-value="s_qty + line.get('sale_qty')" />
                                                <t t-if="line.get('internal_in_qty')">
                                                	<t t-set="i_qty" t-value="i_qty + line.get('internal_in_qty')" />
                                                </t>
                                                <t t-if="line.get('internal_out_qty')">
                                                	<t t-set="o_qty" t-value="o_qty + line.get('internal_out_qty')" />
                                                </t>
                                                <t t-if="line.get('production_qty')">
                                                	<t t-set="p_qty" t-value="p_qty + line.get('production_qty')" />
                                                </t>
                                                <t t-if="line.get('production_out_qty')">
                                                	<t t-set="po_qty" t-value="po_qty + line.get('production_out_qty')" />
                                                </t>
                                                <t t-set="a_qty" t-value="a_qty + line.get('adjust_qty')" />
                                                <t t-set="e_qty" t-value="e_qty + line.get('ending_qty')" />
                                                <t t-set="cost" t-value="cost + line.get('cost')" />
                                                <t t-set="total_cost" t-value="total_cost + line.get('total_cost')" />
                                                <tr style="page-break-inside: avoid">
                                                    <td class="text-left"> <span t-esc="line.get('product')"/></td>
                                                    <td class="text-right"> <span t-esc="'%.2f'%(line.get('beginning_qty'))"/></td>
                                                    <td class="text-right"> <span t-esc="'%.2f'%(line.get('received_qty'))"/></td>
                                                    <td class="text-right"> <span t-esc="'%.2f'%(line.get('sale_qty'))"/></td>
                                                    <td class="text-right"> <span t-esc="'%.2f'%(line.get('internal_in_qty'))"/></td>
                                                    <td class="text-right"> <span t-esc="'%.2f'%(line.get('internal_out_qty'))"/></td>
                                                    <td class="text-right"> <span t-esc="'%.2f'%(line.get('production_qty'))"/></td>
                                                    <td class="text-right"> <span t-esc="'%.2f'%(line.get('production_out_qty'))"/></td>
                                                    <td class="text-right"> <span t-esc="'%.2f'%(line.get('adjust_qty'))"/></td>
                                                    <td class="text-right"> <span t-esc="'%.2f'%(line.get('ending_qty'))"/></td>
                                                    <td class="text-right"> <span t-esc="'%.2f'%(line.get('cost'))"/></td>
                                                    <td class="text-right"> <span t-esc="'%.2f'%(line.get('total_cost'))"/></td>
                                                </tr>
                                            </t>
                                            <tr style="page-break-inside: avoid">
                                                <td class="text-right"> <b>Total</b> </td>
                                                <td class="text-right"> <b><span t-esc="'%.2f'%(b_qty)"/></b></td>
                                                <td class="text-right"> <b><span t-esc="'%.2f'%(r_qty)"/></b></td>
                                                <td class="text-right"> <b><span t-esc="'%.2f'%(s_qty)"/></b></td>
                                                <td class="text-right"> <b><span t-esc="'%.2f'%(i_qty)"/></b></td>
                                                <td class="text-right"> <b><span t-esc="'%.2f'%(o_qty)"/></b></td>
                                                <td class="text-right"> <b><span t-esc="'%.2f'%(p_qty)"/></b></td>
                                                <td class="text-right"> <b><span t-esc="'%.2f'%(po_qty)"/></b></td>
                                                <td class="text-right"> <b><span t-esc="'%.2f'%(a_qty)"/></b></td>
                                                <td class="text-right"> <b><span t-esc="'%.2f'%(e_qty)"/></b></td>
                                                <td class="text-right"> <b><span t-esc="'%.2f'%(cost)"/></b></td>
                                                <td class="text-right"> <b><span t-esc="'%.2f'%(total_cost)"/></b></td>
                                                
                                            </tr>
                                        </t>
                                        <t t-if="docs.is_group_by_category">
                                            <t t-set="lines" t-value="docs.group_by_lines(lines)"/>
                                            <t t-foreach="lines" t-as="l_val">
                                                <tr style="page-break-inside: avoid">
                                                    <td style="background:#d6d6d6;border-top:1px solid black;border-bottom:1px solid black;" colspan="10">
                                                        <span t-esc="l_val.get('category')"/>
                                                    </td>
                                                </tr>
                                                <t t-set="b_qty" t-value="0" />
                                                <t t-set="r_qty" t-value="0" />
                                                <t t-set="s_qty" t-value="0" />
                                                <t t-set="i_qty" t-value="0" />
                                                <t t-set="o_qty" t-value="0" />
                                                <t t-set="p_qty" t-value="0" />
                                                <t t-set="po_qty" t-value="0" />
                                                <t t-set="a_qty" t-value="0" />
                                                <t t-set="e_qty" t-value="0" />
                                                <t t-set="cost" t-value="0"/>
                                            	<t t-set="total_cost" t-value="0"/>
                                                <t t-foreach="l_val.get('values')" t-as="line">
                                                    <t t-set="b_qty" t-value="b_qty + line.get('beginning_qty')" />
                                                    <t t-set="r_qty" t-value="r_qty + line.get('received_qty')" />
                                                    <t t-set="s_qty" t-value="s_qty + line.get('sale_qty')" />
                                                    <t t-if="line.get('internal_in_qty')">
                                                    	<t t-set="i_qty" t-value="i_qty + line.get('internal_in_qty')" />
                                                    </t>
                                                    <t t-if="line.get('internal_out_qty')">
                                                    	<t t-set="o_qty" t-value="o_qty + line.get('internal_out_qty')" />
                                                    </t>
                                                    <t t-if="line.get('production_qty')">
                                                    	<t t-set="p_qty" t-value="p_qty + line.get('production_qty')" />
                                                    </t>
                                                    <t t-if="line.get('production_out_qty')">
                                                    	<t t-set="po_qty" t-value="po_qty + line.get('production_out_qty')" />
                                                    </t>
                                                    <t t-set="a_qty" t-value="a_qty + line.get('adjust_qty')" />
                                                    <t t-set="e_qty" t-value="e_qty + line.get('ending_qty')" />
                                                    <t t-set="cost" t-value="cost + line.get('cost')" />
                                                	<t t-set="total_cost" t-value="total_cost + line.get('total_cost')" />
                                                    <tr style="page-break-inside: avoid">
                                                        <td class="text-left"> <span t-esc="line.get('product')"/></td>
                                                        <td class="text-right"> <span t-esc="'%.2f'%(line.get('beginning_qty'))"/></td>
                                                        <td class="text-right"> <span t-esc="'%.2f'%(line.get('received_qty'))"/></td>
                                                        <td class="text-right"> <span t-esc="'%.2f'%(line.get('sale_qty'))"/></td>
                                                        <td class="text-right"> <span t-esc="'%.2f'%(line.get('internal_in_qty'))"/></td>
                                                        <td class="text-right"> <span t-esc="'%.2f'%(line.get('internal_out_qty'))"/></td>
                                                        <td class="text-right"> <span t-esc="'%.2f'%(line.get('production_qty'))"/></td>
                                                        <td class="text-right"> <span t-esc="'%.2f'%(line.get('production_out_qty'))"/></td>
                                                        <td class="text-right"> <span t-esc="'%.2f'%(line.get('adjust_qty'))"/></td>
                                                        <td class="text-right"> <span t-esc="'%.2f'%(line.get('ending_qty'))"/></td>
                                                        <td class="text-right"> <span t-esc="'%.2f'%(line.get('cost'))"/></td>
                                                        <td class="text-right"> <span t-esc="'%.2f'%(line.get('total_cost'))"/></td>
                                                    </tr>
                                                </t>
                                                <tr style="page-break-inside: avoid">
                                                    <td class="text-right" style="border-bottom:1px solid black;border-top:1px solid black">
                                                        <b>Total</b>
                                                    </td>
                                                    <td class="text-right" style="border-bottom:1px solid black;">
                                                        <b><span t-esc="'%.2f'%(b_qty)"/></b>
                                                    </td>
                                                    <td class="text-right" style="border-bottom:1px solid black;">
                                                        <b><span t-esc="'%.2f'%(r_qty)"/></b>
                                                    </td>
                                                    <td class="text-right" style="border-bottom:1px solid black;">
                                                        <b><span t-esc="'%.2f'%(s_qty)"/></b>
                                                    </td>
                                                    <td class="text-right" style="border-bottom:1px solid black;">
                                                        <b><span t-esc="'%.2f'%(i_qty)"/></b>
                                                    </td>
                                                    <td class="text-right" style="border-bottom:1px solid black;">
                                                        <b><span t-esc="'%.2f'%(o_qty)"/></b>
                                                    </td>
                                                    <td class="text-right" style="border-bottom:1px solid black;">
                                                        <b><span t-esc="'%.2f'%(p_qty)"/></b>
                                                    </td>
                                                    <td class="text-right" style="border-bottom:1px solid black;">
                                                        <b><span t-esc="'%.2f'%(po_qty)"/></b>
                                                    </td>
                                                    <td class="text-right" style="border-bottom:1px solid black;">
                                                        <b><span t-esc="'%.2f'%(a_qty)"/></b>
                                                    </td>
                                                    <td class="text-right" style="border-bottom:1px solid black;">
                                                        <b><span t-esc="'%.2f'%(e_qty)"/></b>
                                                    </td>
                                                    <td class="text-right" style="border-bottom:1px solid black;">
                                                        <b><span t-esc="'%.2f'%(cost)"/></b>
                                                    </td>
                                                    <td class="text-right" style="border-bottom:1px solid black;">
                                                        <b><span t-esc="'%.2f'%(total_cost)"/></b>
                                                    </td>
                                                </tr>
                                            </t>
                                        </t>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    <p style="page-break-before:always;"> </p>
                    </div>
                </t>
			</t>
			</t>
		</template>
</odoo>
	
